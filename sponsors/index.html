<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sponsors - Social Vote</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
   <link rel="icon" type="image/png" href="/assets/images/favicon.png">
    <style>
    :root{
      --primary:#0A1F44;
      --accent:#D4AF37;
      --white:#fff;
      --light-bg:#F8F9FA;
      --gray:#6C757D;
      --dark:#343A40;
      --shadow:0 4px 15px rgba(0,0,0,.1);
      --shadow-lg:0 10px 30px rgba(0,0,0,.15);
      --transition:all .3s ease;
    }
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Poppins',sans-serif;background:var(--light-bg);color:var(--dark);line-height:1.6}

    .navbar{
      position:fixed;top:0;left:0;right:0;z-index:1000;
      background:var(--primary);padding:10px 5%;display:flex;justify-content:space-between;align-items:center;
      box-shadow:var(--shadow);
    }
    .navbar-brand{display:flex;align-items:center;gap:10px;text-decoration:none}
    .navbar-brand i{font-size:2rem;color:var(--accent)}
    .navbar-brand span{font-size:1.5rem;font-weight:700;color:var(--accent)}
    .nav-links{display:flex;gap:30px;list-style:none}
    .nav-links a{color:var(--white);text-decoration:none;font-weight:500;transition:var(--transition)}
    .nav-links a:hover,.nav-links a.active{color:var(--accent)}
    .nav-auth{display:flex;gap:12px;align-items:center}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 22px;border-radius:25px;border:none;cursor:pointer;font-weight:600;text-decoration:none;transition:var(--transition);font-family:inherit;font-size:.95rem}
    .btn-primary{background:var(--accent);color:var(--primary)}
    .btn-primary:hover{background:#C4A030;transform:translateY(-2px)}
    .btn-outline{background:transparent;border:2px solid var(--accent);color:var(--accent)}
    .btn-outline:hover{background:var(--accent);color:var(--primary)}
    .btn-sm{padding:8px 16px;font-size:.85rem}

    .menu-toggle{display:none;flex-direction:column;gap:5px;cursor:pointer}
    .menu-toggle span{width:25px;height:3px;background:var(--white)}
    .mobile-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:2000;display:none}
    .mobile-overlay.active{display:block}
    .mobile-menu{
      position:fixed;top:0;left:-100%;height:100vh;width:80%;max-width:320px;z-index:2001;
      background:var(--primary);padding:15px 20px 30px;transition:var(--transition)
    }
    .mobile-menu.active{left:0}
    .mobile-menu-close{position:absolute;top:20px;right:20px;background:none;border:none;color:var(--white);font-size:1.5rem;cursor:pointer}
    .mobile-menu ul{list-style:none}
    .mobile-menu li{margin-bottom:3px}
    .mobile-menu a{color:var(--white);text-decoration:none;font-size:1rem}

    .hero{
      padding:120px 5% 60px;
      background:linear-gradient(135deg,var(--primary),#1a3a6e);
      color:var(--white);text-align:center
    }
    .hero h1{font-size:2.6rem;margin-bottom:12px}
    .hero h1 span{color:var(--accent)}
    .hero p{opacity:.9;max-width:700px;margin:0 auto}

    .container{max-width:1200px;margin:0 auto;padding:50px 5%}
    .section-title{text-align:center;margin-bottom:35px}
    .section-title h2{color:var(--primary);font-size:2rem}
    .section-title h2 span{color:var(--accent)}
    .section-title p{color:var(--gray);margin-top:8px}

    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:22px}
    .card{
      background:var(--white);border-radius:18px;box-shadow:var(--shadow);overflow:hidden;
      transition:var(--transition)
    }
    .card:hover{transform:translateY(-6px);box-shadow:var(--shadow-lg)}
    .card-header{padding:18px;display:flex;align-items:center;gap:12px;border-bottom:1px solid #eee}
    .logo{
      width:64px;height:64px;border-radius:12px;background:var(--light-bg);object-fit:contain;padding:8px
    }
    .card-header h3{color:var(--primary);font-size:1.05rem}
    .tag{display:inline-block;margin-top:6px;padding:4px 10px;border-radius:999px;font-size:.75rem;font-weight:700;background:rgba(212,175,55,.15);color:#856404}
    .card-body{padding:18px}
    .card-body p{color:var(--gray);font-size:.92rem}
    .card-footer{padding:16px 18px;background:var(--light-bg);display:flex;justify-content:space-between;align-items:center}
    .link{color:var(--primary);font-weight:700;text-decoration:none}
    .link:hover{color:var(--accent)}

    .cta{
      margin-top:45px;background:linear-gradient(135deg,var(--accent),#C4A030);
      border-radius:20px;padding:45px 25px;text-align:center;color:var(--primary)
    }
    .cta h3{font-size:1.8rem;margin-bottom:10px}
    .cta p{opacity:.9;max-width:700px;margin:0 auto 20px}

    .footer{background:var(--primary);color:var(--white);padding:15px 5%;text-align:center;margin-top:30px}
    .footer p{opacity:.85}
    .footer a{color:var(--accent);text-decoration:none}

    .loading{padding:60px;text-align:center;color:var(--gray)}
    .spinner{width:52px;height:52px;border:4px solid var(--light-bg);border-top-color:var(--accent);border-radius:50%;animation:spin 1s linear infinite;margin:0 auto 12px}
    @keyframes spin{to{transform:rotate(360deg)}}

    @media(max-width:992px){
      .nav-links{display:none}
      .menu-toggle{display:flex}
    }
          .navbar-logo {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.navbar-logo img {
    height: 45px;
    width: auto;
}

@media (min-width: 768px) {
    .navbar-logo img {
        height: 40px;
    }
}

.navbar-logo span {
    font-size: 1.1rem;
    font-weight: 700;
    color: white;
}

@media (min-width: 768px) {
    .navbar-logo span {
        font-size: 1.35rem;
    }
}

     .nav-links a {
        color: var(--white);
        text-decoration: none;
        font-weight: 500;
        transition: var(--transition);
        position: relative;            /* IMPORTANT pour la barre */
        padding: 6px 0;
        }

        /* Hover */
        .nav-links a:hover {
        color: var(--accent);
        }

        /* Barre sous le lien (page active) */
        .nav-links a.active::after {
        content: '';
        position: absolute;
        left: 0;
        bottom: -6px;
        width: 100%;
        height: 3px;
        background: var(--accent);
        border-radius: 3px;
        }

        /* Couleur du lien actif */
        .nav-links a.active {
        color: var(--accent);
        font-weight: 700;
        }

        /* Feedback clic (petit flash) */
        .nav-links a.clicked {
        opacity: 0.7;
        }

        .mobile-menu a {
        color: var(--white);
        text-decoration: none;
        font-size: 1rem;
        position: relative;
        padding: 6px 0;
        display: inline-block;
        }

        .mobile-menu a.active {
        color: var(--accent);
        font-weight: 700;
        }

        .mobile-menu a.active::after {
        content: '';
        position: absolute;
        left: 0;
        bottom: -1px;
        width: 100%;
        height: 1px;
        background: var(--accent);
        border-radius: 3px;
        }

        /* =========================================================
   SOCIAL VOTE - GLOBAL RESPONSIVE PACK (ANDROID FIRST)
   Colle ce bloc √† la FIN du <style> de chaque page.
   Objectif: 0 overflow, navbar clean, forms clean, mobile menu ok.
   ========================================================= */

html, body { max-width: 100%; overflow-x: hidden; }
* { box-sizing: border-box; min-width: 0; }
img, video, canvas { max-width: 100%; height: auto; }

/* -------------------------
   NAVBAR: mobile behavior
   ------------------------- */

/* Emp√™che les √©l√©ments navbar de d√©border */
.navbar {
  max-width: 100%;
  gap: 12px;
}

/* Sur petit √©cran, on cache les boutons auth dans la navbar
   et on laisse le menu hamburger g√©rer l'auth */
@media (max-width: 576px) {
  .nav-auth { display: none !important; }
}

/* Si ton menu toggle n‚Äôappara√Æt pas partout, force-le sur mobile */
@media (max-width: 992px) {
  .menu-toggle { display: flex !important; }
  .nav-links { display: none !important; }
}

/* -------------------------
   BUTTONS: safe sizing
   ------------------------- */
.btn {
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Sur mobile: boutons plus petits, mais restent sur 1 ligne quand possible */
@media (max-width: 576px) {
  .btn { padding: 10px 14px !important; border-radius: 14px !important; font-size: .95rem !important; }
  .btn-lg { padding: 12px 16px !important; font-size: 1rem !important; }
  .btn-sm { padding: 9px 12px !important; font-size: .85rem !important; }
}

/* Autoriser le retour √† la ligne uniquement sur les boutons "longs"
   => ajoute class="btn-wrap" sur les boutons qui ont du texte long */
.btn.btn-wrap { white-space: normal; line-height: 1.2; }

/* -------------------------
   LAYOUT: grids -> 1 col on mobile
   ------------------------- */

/* Beaucoup de tes pages utilisent .form-row => on force 1 colonne en mobile */
@media (max-width: 576px) {
  .form-row { grid-template-columns: 1fr !important; }
}

/* Tables: scroll horizontal */
.table-container,
.votes-table,
.referrals-table,
.candidates-table {
  width: 100%;
  overflow-x: auto;
}

/* -------------------------
   FORMS: no overflow
   ------------------------- */
input, select, textarea {
  width: 100%;
  max-width: 100%;
}

/* input-group: ne doit pas d√©passer */
.input-group { width: 100%; max-width: 100%; }

/* Referral input + bouton v√©rifier: stack sur mobile */
@media (max-width: 576px) {
  .referral-input-group { flex-direction: column !important; }
  .referral-input-group .btn { width: 100% !important; }
}

/* Auth: double boutons (login/register) => stack sur tr√®s petit √©cran */
@media (max-width: 420px) {
  .auth-two-buttons { grid-template-columns: 1fr !important; }
}

/* Modals: √©viter overflow */
.modal { max-width: 95vw !important; }
.modal-body { overflow-x: hidden; }


    </style>

<!-- ================= SEO & SOCIAL SHARING ================= -->
<meta property="og:title" content="Social Vote - Ta communaut√© fait ta force">
<meta property="og:description" content="Participez, votez pour vos candidats pr√©f√©r√©s et gagnez des prix exceptionnels !">
<meta property="og:image" content="https://placehold.co/1200x630?text=Social+Vote"> <!-- Remplace par une belle image h√©berg√©e sur Cloudinary -->
<meta property="og:url" content="https://ton-site.com">
<meta name="twitter:card" content="summary_large_image">

<!-- ================= LIBRAIRIES (CONFETTI + FINGERPRINT) ================= -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3/dist/fp.min.js"></script>
</head>
<body>
  <nav class="navbar">
    <a href="/" class="navbar-brand">
      <span class="navbar-logo"><img src="/assets/images/logo-white.png" alt="Social Vote" onerror="this.style.display='none'"></span>
    </a>
    <ul class="nav-links">
      <li><a href="/">Accueil</a></li>
      <li><a href="/vote/">Voter</a></li>
      <li><a href="/referral/">Parrainage</a></li>
      <li><a href="/history/">Historique</a></li>
      <li><a href="/sponsors/" class="active">Sponsors</a></li>
      <li><a href="/contact/">Contact</a></li>
    </ul>
    <div class="nav-auth" id="navAuth">
      <a href="/auth/" class="btn btn-outline btn-sm">Connexion</a>
      <a href="/auth/?tab=candidate" class="btn btn-primary btn-sm">S'inscrire</a>
    </div>
    <div class="menu-toggle" id="menuToggle"><span></span><span></span><span></span></div>
  </nav>

  <div class="mobile-overlay" id="mobileOverlay"></div>
  <div class="mobile-menu" id="mobileMenu">
    <button class="mobile-menu-close" id="mobileMenuClose"><i class="fas fa-times"></i></button>
    <ul>
      <li><a href="/">Accueil</a></li>
      <li><a href="/vote/">Voter</a></li>
      <li><a href="/referral/">Parrainage</a></li>
      <li><a href="/history/">Historique</a></li>
      <li><a href="/sponsors/">Sponsors</a></li>
      <li><a href="/contact/">Contact</a></li>
    </ul>
  </div>

  <header class="hero">
    <h1>Nos <span>Partenaires</span></h1>
    <p>Ils soutiennent Social Vote. D√©couvrez nos sponsors actifs et rejoignez-nous pour gagner en visibilit√©.</p>
  </header>

  <main class="container">
    <div class="section-title">
      <h2>ü§ù Liste des <span>Sponsors</span></h2>
      <p>Les sponsors affich√©s ici sont g√©r√©s depuis la page Admin.</p>
    </div>

    <section id="sponsorsGridWrap">
      <div class="loading"><div class="spinner"></div>Chargement des sponsors...</div>
    </section>

    <section class="cta">
      <h3>Devenir partenaire</h3>
      <p>Profitez d‚Äôune visibilit√© sur la plateforme, de publicit√©s cibl√©es et d‚Äôun ROI mesurable.</p>
      <a class="btn btn-primary" href="/contact/">
        <i class="fas fa-paper-plane"></i> Demander un partenariat
      </a>
    </section>
  </main>

  <footer class="footer">
    <p>&copy; 2026 Social Vote. Tous droits r√©serv√©s. | <a href="/rules/">R√®glement</a> | <a href="/contact/">Contact</a></p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    const CONFIG = {
      SUPABASE_URL: 'https://ynymnvmilertakacfrhy.supabase.co',
      SUPABASE_ANON_KEY: 'sb_publishable_jbmKmsT4FxmiTfYUBajgOA_QxWz8j2K'
    };
    const supabaseClient = supabase.createClient(CONFIG.SUPABASE_URL, CONFIG.SUPABASE_ANON_KEY);

    let currentUser = null;

    document.addEventListener('DOMContentLoaded', async () => {
      setActiveNavLinks();
      initMobileMenu();
      // Cr√©er le bouton WhatsApp flottant
      createWhatsAppButton();
      await checkAuth();
      await loadSponsors();
    });

    function initMobileMenu(){
      const menuToggle = document.getElementById('menuToggle');
      const mobileMenu = document.getElementById('mobileMenu');
      const mobileOverlay = document.getElementById('mobileOverlay');
      const mobileMenuClose = document.getElementById('mobileMenuClose');
      const open = ()=>{mobileMenu.classList.add('active');mobileOverlay.classList.add('active');}
      const close = ()=>{mobileMenu.classList.remove('active');mobileOverlay.classList.remove('active');}
      menuToggle.addEventListener('click', open);
      mobileMenuClose.addEventListener('click', close);
      mobileOverlay.addEventListener('click', close);
    }

    async function checkAuth(){
      const session = localStorage.getItem('socialvote_session');
      if(session){
        currentUser = JSON.parse(session);
        renderNavAuth();
        const navAuth = document.getElementById('navAuth');
        navAuth.innerHTML = `
          <a href="/profile/" class="btn btn-outline btn-sm">
            <i class="fas fa-user"></i> ${currentUser.full_name.split(' ')[0]}
          </a>
          <button class="btn btn-primary btn-sm" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i>
          </button>
        `;
      }
    }
    function logout(){
      localStorage.removeItem('socialvote_session');
      location.reload();
    }

    function setActiveNavLinks() {
  // 1. R√©cup√©rer le chemin actuel (ex: "/" ou "/vote/" ou "/vote/index.html")
  const path = window.location.pathname;

  // 2. S√©lectionner tous les liens du menu (desktop et mobile)
  const links = document.querySelectorAll('.nav-links a, .mobile-menu a');

  links.forEach(a => {
    // R√©cup√©rer le lien cible
    const href = a.getAttribute('href');
    
    // On enl√®ve d'abord la classe active partout pour nettoyer
    a.classList.remove('active');

    // 3. Logique de comparaison intelligente
    if (path === '/' || path.endsWith('/index.html') && path.split('/').length <= 2) {
        // === CAS : PAGE D'ACCUEIL ===
        // On active si le lien pointe vers la racine ou index.html
        if (href === '/' || href === 'index.html' || href === './index.html' || href === '../index.html') {
            // V√©rification suppl√©mentaire : ne pas activer si le lien contient un sous-dossier
            if (!href.includes('/vote') && !href.includes('/history') && !href.includes('/referral')) {
                a.classList.add('active');
            }
        }
    } else {
        // === CAS : PAGES INTERNES (Dossiers) ===
        // On r√©cup√®re le nom du dossier actuel (ex: "vote" dans "/vote/")
        // path.split('/') donne ["", "vote", ""] => on prend l'index 1
        const currentFolder = path.split('/')[1]; 

        // Si le lien contient le nom du dossier actuel, c'est le bon !
        if (currentFolder && href.includes(currentFolder)) {
            a.classList.add('active');
        }
    }
  });
}

    async function loadSponsors(){
      const wrap = document.getElementById('sponsorsGridWrap');
      try{
        const { data, error } = await supabaseClient
          .from('sponsors')
          .select('*')
          .eq('is_active', true)
          .order('display_order', { ascending: true });

        if(error) throw error;

        const sponsors = data || [];
        if(sponsors.length === 0){
          wrap.innerHTML = `
            <div class="card" style="padding:25px;text-align:center;">
              <h3 style="color:var(--primary);margin-bottom:10px;">Aucun sponsor pour le moment</h3>
              <p style="color:var(--gray);">Les sponsors ajout√©s par l'admin appara√Ætront ici.</p>
            </div>
          `;
          return;
        }

        wrap.innerHTML = `
          <div class="grid">
            ${sponsors.map(s => `
              <article class="card">
                <div class="card-header">
                  <img class="logo" src="${s.logo_url || 'https://placehold.co/120x80?text=Logo'}" alt="${s.name}">
                  <div>
                    <h3>${s.name}</h3>
                    <span class="tag">${(s.tier || 'bronze').toUpperCase()}</span>
                  </div>
                </div>
                <div class="card-body">
                  <p>${s.description || '‚Äî'}</p>
                </div>
                <div class="card-footer">
                  <span style="color:var(--gray);font-size:.85rem;">Partenaire</span>
                  ${s.website_url ? `<a class="link" href="${s.website_url}" target="_blank">Visiter <i class="fas fa-arrow-right"></i></a>` : `<span class="link" style="opacity:.6">‚Äî</span>`}
                </div>
              </article>
            `).join('')}
          </div>
        `;
      }catch(err){
        console.error(err);
        wrap.innerHTML = `
          <div class="card" style="padding:25px;">
            <h3 style="color:var(--primary);margin-bottom:10px;">Erreur de chargement</h3>
            <p style="color:var(--gray);">Impossible de charger les sponsors. V√©rifiez la configuration Supabase.</p>
          </div>
        `;
      }
    }

    function renderNavAuth() {
  const navAuth = document.getElementById('navAuth');
  if (!navAuth) return;

  if (currentUser) {
    navAuth.innerHTML = `
      <a href="/auth/?tab=candidate" class="btn btn-primary btn-sm">
        <i class="fas fa-star"></i> S'inscrire comme candidat
      </a>
      <a href="/profile/" class="btn btn-outline btn-sm">
        <i class="fas fa-user"></i> ${currentUser.full_name.split(' ')[0]}
      </a>
      <button class="btn btn-outline btn-sm" onclick="logout()">
        <i class="fas fa-sign-out-alt"></i>
      </button>
    `;

    // Mobile menu: remplacer Connexion/Inscription par Profil/D√©connexion
    patchMobileMenuForLoggedIn();
  } else {
    navAuth.innerHTML = `
      <a href="/auth/" class="btn btn-outline btn-sm">Connexion</a>
      <a href="/auth/?tab=register" class="btn btn-primary btn-sm">S'inscrire</a>
    `;

    patchMobileMenuForLoggedOut();
  }
}

function patchMobileMenuForLoggedIn() {
  const menu = document.querySelector('.mobile-menu ul');
  if (!menu) return;

  // Enlever anciens liens si pr√©sents
  menu.querySelectorAll('[data-auth-link]').forEach(el => el.remove());

  // Ajouter Profil + D√©connexion (si pas d√©j√†)
  const liProfile = document.createElement('li');
  liProfile.setAttribute('data-auth-link', 'true');
  liProfile.innerHTML = `<a href="/profile/">Mon Profil</a>`;

  const liCandidate = document.createElement('li');
  liCandidate.setAttribute('data-auth-link', 'true');
  liCandidate.innerHTML = `<a href="/auth/?tab=candidate">S'inscrire comme candidat</a>`;

  const liLogout = document.createElement('li');
  liLogout.setAttribute('data-auth-link', 'true');
  liLogout.innerHTML = `<a href="#" onclick="logout(); return false;">D√©connexion</a>`;

  menu.appendChild(liCandidate);
  menu.appendChild(liProfile);
  menu.appendChild(liLogout);
}

function patchMobileMenuForLoggedOut() {
  const menu = document.querySelector('.mobile-menu ul');
  if (!menu) return;

  menu.querySelectorAll('[data-auth-link]').forEach(el => el.remove());

  const liLogin = document.createElement('li');
  liLogin.setAttribute('data-auth-link', 'true');
  liLogin.innerHTML = `<a href="/auth/">Connexion</a>`;

  const liRegister = document.createElement('li');
  liRegister.setAttribute('data-auth-link', 'true');
  liRegister.innerHTML = `<a href="/auth/?tab=register">S'inscrire</a>`;

  menu.appendChild(liLogin);
  menu.appendChild(liRegister);
}

// ==========================================
// BOUTON WHATSAPP FLOTTANT
// ==========================================

function createWhatsAppButton() {
  const whatsappBtn = document.createElement('a');
  whatsappBtn.href = 'https://wa.me/2290140304751';
  whatsappBtn.target = '_blank';
  whatsappBtn.className = 'whatsapp-float';
  whatsappBtn.innerHTML = `
    <img src="https://img.icons8.com/?size=100&id=85088&format=png&color=000000" alt="WhatsApp" style="width: 100%; height: 100%;">
  `;
  whatsappBtn.style.cssText = `
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 40px;
    height: 40px;
    background-color: #25D366;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    z-index: 9998;
    transition: all 0.3s ease;
    padding: 9px;
  `;
  
  whatsappBtn.addEventListener('mouseenter', () => {
    whatsappBtn.style.transform = 'scale(1.1)';
  });
  
  whatsappBtn.addEventListener('mouseleave', () => {
    whatsappBtn.style.transform = 'scale(1)';
  });
  
  document.body.appendChild(whatsappBtn);
}
  </script>
</body>
</html>